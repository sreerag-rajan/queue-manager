{
	"info": {
		"_postman_id": "queue-manager-api-collection",
		"name": "Queue Manager API",
		"description": "API collection for Queue Manager service - Get queues by service name",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Health Check",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/healthz",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"healthz"
					]
				},
				"description": "Health check endpoint to verify the API is running"
			},
			"response": [
				{
					"name": "Success",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/healthz",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"healthz"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"data\": {\n        \"status\": \"ok\"\n    }\n}"
				}
			]
		},
		{
			"name": "Get Queues by Service",
			"item": [
				{
					"name": "Get Queues - order-service",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/services/order-service/queues",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"services",
								"order-service",
								"queues"
							]
						},
						"description": "Get all queues assigned to order-service. Based on seed data, this should return: order.created, order.processed, order.cancelled"
					},
					"response": [
						{
							"name": "Success - order-service queues",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/services/order-service/queues",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"services",
										"order-service",
										"queues"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": [\n        {\n            \"queue_name\": \"order.created\",\n            \"uuid\": \"550e8400-e29b-41d4-a716-446655440000\",\n            \"durable\": true,\n            \"auto_delete\": false,\n            \"arguments\": {\n                \"x-message-ttl\": 86400000\n            },\n            \"description\": \"Queue for order creation events\",\n            \"prefetch_count\": 10,\n            \"max_inflight\": 50,\n            \"notes\": \"Primary consumer for order creation events\",\n            \"meta\": {\n                \"team\": \"orders\",\n                \"sla\": \"p0\"\n            }\n        },\n        {\n            \"queue_name\": \"order.processed\",\n            \"uuid\": \"550e8400-e29b-41d4-a716-446655440001\",\n            \"durable\": true,\n            \"auto_delete\": false,\n            \"arguments\": {},\n            \"description\": \"Queue for processed orders\",\n            \"prefetch_count\": 20,\n            \"max_inflight\": 100,\n            \"notes\": \"Process completed orders\",\n            \"meta\": {\n                \"team\": \"orders\"\n            }\n        },\n        {\n            \"queue_name\": \"order.cancelled\",\n            \"uuid\": \"550e8400-e29b-41d4-a716-446655440002\",\n            \"durable\": true,\n            \"auto_delete\": false,\n            \"arguments\": {},\n            \"description\": \"Queue for cancelled orders\",\n            \"prefetch_count\": 5,\n            \"max_inflight\": 25,\n            \"notes\": \"Handle order cancellations\",\n            \"meta\": {\n                \"team\": \"orders\"\n            }\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Get Queues - payment-service",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/services/payment-service/queues",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"services",
								"payment-service",
								"queues"
							]
						},
						"description": "Get all queues assigned to payment-service. Based on seed data, this should return: payment.success, payment.failed"
					},
					"response": [
						{
							"name": "Success - payment-service queues",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/services/payment-service/queues",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"services",
										"payment-service",
										"queues"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": [\n        {\n            \"queue_name\": \"payment.success\",\n            \"uuid\": \"550e8400-e29b-41d4-a716-446655440003\",\n            \"durable\": true,\n            \"auto_delete\": false,\n            \"arguments\": {},\n            \"description\": \"Payment success notifications\",\n            \"prefetch_count\": 15,\n            \"max_inflight\": 75,\n            \"notes\": \"Process successful payments\",\n            \"meta\": {\n                \"team\": \"payments\",\n                \"sla\": \"p0\"\n            }\n        },\n        {\n            \"queue_name\": \"payment.failed\",\n            \"uuid\": \"550e8400-e29b-41d4-a716-446655440004\",\n            \"durable\": true,\n            \"auto_delete\": false,\n            \"arguments\": {\n                \"x-dead-letter-exchange\": \"dead.letter\"\n            },\n            \"description\": \"Payment failure notifications\",\n            \"prefetch_count\": 10,\n            \"max_inflight\": 50,\n            \"notes\": \"Handle payment failures with retries\",\n            \"meta\": {\n                \"team\": \"payments\",\n                \"sla\": \"p1\"\n            }\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Get Queues - notification-service",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/services/notification-service/queues",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"services",
								"notification-service",
								"queues"
							]
						},
						"description": "Get all queues assigned to notification-service. Based on seed data, this should return: notification.email, notification.sms"
					},
					"response": [
						{
							"name": "Success - notification-service queues",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/services/notification-service/queues",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"services",
										"notification-service",
										"queues"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": [\n        {\n            \"queue_name\": \"notification.email\",\n            \"uuid\": \"550e8400-e29b-41d4-a716-446655440005\",\n            \"durable\": true,\n            \"auto_delete\": false,\n            \"arguments\": {},\n            \"description\": \"Email notification queue\",\n            \"prefetch_count\": 30,\n            \"max_inflight\": 150,\n            \"notes\": \"Send email notifications\",\n            \"meta\": {\n                \"team\": \"notifications\"\n            }\n        },\n        {\n            \"queue_name\": \"notification.sms\",\n            \"uuid\": \"550e8400-e29b-41d4-a716-446655440006\",\n            \"durable\": true,\n            \"auto_delete\": false,\n            \"arguments\": {},\n            \"description\": \"SMS notification queue\",\n            \"prefetch_count\": 30,\n            \"max_inflight\": 150,\n            \"notes\": \"Send SMS notifications\",\n            \"meta\": {\n                \"team\": \"notifications\"\n            }\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Get Queues - monitoring-service",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/services/monitoring-service/queues",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"services",
								"monitoring-service",
								"queues"
							]
						},
						"description": "Get all queues assigned to monitoring-service. Based on seed data, this should return: dlq.payment.failed"
					},
					"response": [
						{
							"name": "Success - monitoring-service queues",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/services/monitoring-service/queues",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"services",
										"monitoring-service",
										"queues"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": [\n        {\n            \"queue_name\": \"dlq.payment.failed\",\n            \"uuid\": \"550e8400-e29b-41d4-a716-446655440007\",\n            \"durable\": true,\n            \"auto_delete\": false,\n            \"arguments\": {},\n            \"description\": \"Dead letter queue for failed payments\",\n            \"prefetch_count\": 5,\n            \"max_inflight\": 10,\n            \"notes\": \"Monitor dead letter queue for alerts\",\n            \"meta\": {\n                \"team\": \"platform\",\n                \"alert\": true\n            }\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Get Queues - Non-existent Service",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/services/non-existent-service/queues",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"services",
								"non-existent-service",
								"queues"
							]
						},
						"description": "Get queues for a service that doesn't exist. Should return an empty array."
					},
					"response": [
						{
							"name": "Success - Empty array for non-existent service",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/services/non-existent-service/queues",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"services",
										"non-existent-service",
										"queues"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": []\n}"
						}
					]
				},
				{
					"name": "Get Queues - Missing Service Name",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/services//queues",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"services",
								"",
								"queues"
							]
						},
						"description": "Test error handling when service_name parameter is missing"
					},
					"response": [
						{
							"name": "Error - Missing service name",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/services//queues",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"services",
										"",
										"queues"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": false,\n    \"error\": {\n        \"code\": \"INVALID_PARAMETER\",\n        \"message\": \"service_name parameter is required\"\n    }\n}"
						}
					]
				}
			],
			"description": "Collection of requests to get queues by service name"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		}
	]
}

